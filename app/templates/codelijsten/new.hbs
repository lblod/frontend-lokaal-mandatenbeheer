{{page-title "Codelijst aanmaken"}}
{{breadcrumb
  "Codelijst aanmaken"
  route="codelijsten.id"
  model=this.model.codelijst.id
}}
<AuToolbar @size="large" @border="bottom" class="au-u-margin-bottom" as |Group|>
  <Group>
    <AuHeading @skin="2">Codelijst aanmaken</AuHeading>
  </Group>
  <Group>
    <AuButtonGroup>
      <Shared::Tooltip
        @showTooltip={{not this.canSave}}
        @alignment="right"
        @tooltipText="De huidige status van de codelijst kan niet worden opgeslagen."
      >
        <AuButton
          @disabled={{not this.canSave}}
          @skin="primary"
          @loading={{this.isSaving}}
          {{on "click" this.saveCodelist}}
        >Opslaan</AuButton>
      </Shared::Tooltip>
      <AuButton @skin="secondary">Annuleer</AuButton>
    </AuButtonGroup>
  </Group>
</AuToolbar>

<div class="au-o-box">
  <div class="au-u-1-3@medium au-u-flex au-u-flex--column">
    <AuLabel>Naam van de codelijst</AuLabel>
    <AuInput
      value={{this.name}}
      @width="block"
      placeholder="Codelijst label"
      {{on "input" this.updateName}}
    />
  </div>
</div>
<AuTable @size={{this.size}}>
  <:header>
    <tr>
      <th>Label</th>
      <th>{{! Acties }}</th>
    </tr>
  </:header>
  <:body>
    {{#each this.concepten as |concept|}}
      <tr>
        <td>{{concept.label}}</td>
        <td>
          <AuButton
            @skin="link"
            @alert={{true}}
            {{on "click" (fn this.deleteConcept concept)}}
          >Verwijder</AuButton>
        </td>
      </tr>
    {{/each}}
  </:body>
  <:footer>
    <tr>
      <td colspan="2">
        <AuButton
          @skin="secondary"
          @icon="plus"
          @width="block"
          {{on "click" this.openAddConceptModal}}
        >
          Voeg een extra optie toe
        </AuButton>
      </td>
    </tr>
  </:footer>
</AuTable>

<AuModal
  @title="Optie toevoegen"
  @modalOpen={{this.isModalOpen}}
  @closable={{true}}
  @closeModal={{fn (mut this.isModalOpen) false}}
>
  <:body>
    <div class="au-o-box au-o-flow">
      <span>
        <AuLabel>Label</AuLabel>
        <AuInput
          @width="default"
          value={{this.conceptName}}
          placeholder="Naam van de optie"
          {{on "input" this.updateConceptName}}
        />
      </span>
    </div>
  </:body>
  <:footer>
    <AuButtonGroup
      class="au-u-flex au-u-flex--between au-u-padding-left au-u-padding-right"
    >
      <AuButton
        @disabled={{not this.isConceptValid}}
        {{on "click" this.addConcept}}
      >Voeg optie toe</AuButton>
      <AuButton
        @skin="secondary"
        {{on "click" (fn (mut this.isModalOpen) false)}}
      >Annuleer</AuButton>
    </AuButtonGroup>
  </:footer>
</AuModal>