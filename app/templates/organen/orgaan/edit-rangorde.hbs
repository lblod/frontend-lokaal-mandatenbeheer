{{breadcrumb
  "Wijzig rangorde mandatarissen"
  route="organen.orgaan.edit-rangorde"
}}
<AuToolbar
  @size="large"
  class="au-u-padding-bottom-none au-u-margin-bottom-none"
  as |Group|
>
  <Group class="au-u-margin-bottom-none">
    <AuHeading @skin="2">
      Wijzig rangorde mandatarissen
    </AuHeading>
  </Group>
  <Group>
    <Shared::Tooltip
      @showTooltip={{this.openModalDisabled}}
      @tooltipText={{this.tooltipText}}
    >
      <AuButton
        {{on "click" this.openModal}}
        size="large"
        @disabled={{this.openModalDisabled}}
      >
        Wijzig rangordes
      </AuButton>
    </Shared::Tooltip>
  </Group>
</AuToolbar>

<AuHeading @skin="3" class="au-u-regular au-u-padding-left au-u-padding-bottom">
  {{this.model.bestuursorgaan.naam}}
  {{this.model.selectedBestuursperiode.label}}
</AuHeading>

<Organen::EditMandatarisRangordeTable
  @mandatarissen={{@model.mandatarisStruct}}
  @orderedMandatarissen={{this.orderedMandatarissen}}
  @updateMandatarisList={{this.updateOrderedMandatarisList}}
  @bestuursperiode={{@model.selectedBestuursperiode}}
  @trackUpdatedRangorde={{this.trackUpdatedRangorde}}
/>

{{outlet}}

<AuModal
  @title="Hoe wil je de rangorde aanpassen?"
  @modalOpen={{this.modalOpen}}
  @closable={{true}}
  @closeModal={{this.closeModal}}
>
  <div class="au-o-box au-o-flow">
    <div>
      Je kan de rangorde van deze mandatarissen aanpassen als
      <strong>"correctie"</strong>
      of als
      <strong>"wijziging van de rangorde"</strong>. Bij een "correctie" zet je
      een fout recht die verkeerd in het systeem geregistreerd was. Bij een
      "wijziging" van de rangorde geef je aan dat de rangorde van de
      mandatarissen
      <strong>doorheen het verloop van de bestuursperiode</strong>
      daadwerkelijk veranderd is, bijvoorbeeld nadat een mandataris verhinderd
      werd en er een vervanger werd aangesteld.
    </div>
    <AuToolbar class="au-u-margin-top" as |Group|>
      <Group>
        <AuButtonGroup>
          <AuButton
            @skin="secondary"
            @alert={{true}}
            {{on "click" this.confirmCorrectRangorde}}
          >
            Corrigeer rangorde
          </AuButton>
          <AuButton {{on "click" this.confirmChangeRangorde}}>
            Wijzig rangorde
          </AuButton>
          <AuButton {{on "click" this.closeModal}} @skin="secondary">
            Annuleer
          </AuButton>
        </AuButtonGroup>
      </Group>
    </AuToolbar>
  </div>
</AuModal>

<AuModal
  @title="Wijzigingen niet opgeslagen"
  @modalOpen={{this.interceptedTransition}}
  @closable={{true}}
  @closeModal={{this.confirmLoseChanges}}
><div class="au-o-box au-o-flow">
    <div>
      Je wijzigingen zijn niet opgeslagen en gaan verloren als je verder gaat!
    </div>
    <AuToolbar class="au-u-margin-top" as |Group|>
      <Group>
        <AuButtonGroup>
          <AuButton @alert={{true}} {{on "click" this.confirmLoseChanges}}>
            Verwerp aanpassingen
          </AuButton>
          <AuButton {{on "click" this.cancelLoseChanges}} @skin="secondary">
            Annuleer
          </AuButton>
        </AuButtonGroup>
      </Group>
    </AuToolbar>
  </div>

</AuModal>